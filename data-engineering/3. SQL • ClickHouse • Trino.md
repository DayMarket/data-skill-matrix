# 3. SQL • ClickHouse • Trino

Этот трек посвящен навыкам работы с SQL, включая написание сложных запросов, оптимизацию производительности и администрирование баз данных, таких как ClickHouse и Trino.

## DE1 (Junior)
- Я пишу SELECT с фильтрацией, агрегацией и JOIN, CTE, window functions и аналитическими функциями.
- Я понимаю основные типы данных, первичные/внешние ключи и разницу OLTP vs OLAP.
- Я создаю таблицы, индексы и партиционирую данные в Clickhouse и Trino.
- Я понимаю уровни изоляции транзакций и нормальные формы (1NF‑3NF).
- Я выполняю распределённые запросы через несколько источников, используя существующие каталоги.

## DE2 (Middle)
- Я создаю MergeTree‑таблицы, задаю primary key, partition key, TTL и понимаю процесс merges в Clickhouse
- Я настраиваю каталоги в Trino
- Я читаю system-таблицы и логи для анализа «узких мест» (дисковое I/O, merges, пробки по памяти).
- Я использую Trino как слой федерации: соединяет данные из S3 + ClickHouse, делает CTAS или INSERT INTO в Iceberg.

## DE3 (Middle +)
- Я оптимизирую схемы (LowCardinality, Sparse columns), создаю Materialized Views и Replacing/Collapsing MergeTree; настраиваю TTL‑политику, агрегирующие витрины в Clickhouse
- Я знаю основные показатели кластера ClickHouse (Query, Merge, Parts, Mutation) и Trino (CPU time, blocked time, GC) и могу оперативно диагностировать 90 % типичных проблем (disk-bound merge, spill-to-disk, out-of-memory).
- Я понимаю влияние типов данных и преобразований на производительность, избегаю неявных кастов.

## DE4 (Senior)
- Я проектирую физические модели хранения под SLA запросов (hot/cold слои, сортировка, партиционирование).
- Я анализирую cost‑based plan, использую session properties и Iceberg connector для оптимизации запросов.
- Я умею читать основные показатели кластера Clickhouse, могу выявить любую проблему, вычислить корневую причину и предложить ряд действий для решения проблемы. Я точечно реагирую и выделяю слабое место в работе кластера

## DE5 (Staff)
- Я настраиваю и управляю кластерами ClickHouse (репликация, шардирование, балансировка нагрузки, backup/restore) и Trino (coordinator/worker topology, resource groups, HA).
- Я читаю и анализирую changelog и release‑notes ClickHouse/Trino, планирую безопасные апгрейды и тестирую миграции.
- Я формирую корпоративную стратегию ClickHouse/Trino: стандарты апгрейдов, capacity‑planning, FinOps и governance каталога данных.
- Я разрабатываю DR‑планы, multi‑DC репликацию и сквозное шифрование.
- Я автоматизирую миграции схем и версионирование данных.
- Я веду R&D новых движков и PoC, оцениваю ROI их внедрения.
- Я обучаю продуктовые команды оптимизации затрат на хранение и вычисления и провожу архитектурные ревью. 